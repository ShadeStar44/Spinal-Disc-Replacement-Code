import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import itertools
import tkinter as tk
from tkinter import filedialog

#extension,(4N),data,converted,to,degrees
tc=np.array([2,2.05,2.1,2.15,2.2,2.25,2.30198,2.35365,2.40358,2.45421,2.50322,2.55384,2.60384,2.65565,2.70225,2.75206,2.80139,2.85108,2.90339,2.95085,3])
ur1c=np.array([0.000881437,0.0069705,0.010491,0.0132299,0.0143883,0.0167015,0.0183008,0.0197466,0.0207372,0.0210336,0.0212875,0.021241,0.0207236,0.0198262,0.0185641,0.0167416,0.0146364,0.012088,0.00989958,0.00682497,0.00410041])
ur2c=np.array([0.000881437,0.0069705,0.010491,0.0132299,0.0143883,0.0167015,0.0183008,0.0197466,0.0207372,0.0210336,0.0212875,0.021241,0.0207236,0.0198262,0.0185641,0.0167416,0.0146364,0.012088,0.00989958,0.00682497,0.00410041])
ur3c=np.array([0.012901,0.0157126,0.0179525,0.0201952,0.0212937,0.0237879,0.0257847,0.0280144,0.0301414,0.0312005,0.0326758,0.0334095,0.0340113,0.0343445,0.034337,0.0339763,0.0332303,0.0322116,0.031199,0.0296044,0.0277132])
ur1c=ur1c*180/np.pi+-.000881437
ur2c=ur2c*180/np.pi+-.000881437
ur3c=ur3c*180/np.pi+-.012901
#flexion,(4P),data,converted,to,degrees
ur1d=np.array([-0.0621789,-0.0503202,-0.00886261,0.0122436,0.0429597,0.0629449,0.0976661,0.112611,0.146919,0.151835,0.175509,0.19121,0.206453,0.225214,0.240787,0.257828,0.273256,0.291502,0.307973,0.328399,0.335316])
ur2d=np.array([0.000881437,0.0134853,0.0246169,0.0282006,0.0311148,0.0325167,0.0343641,0.0349818,0.0361827,0.0363463,0.0370276,0.0374145,0.0377842,0.0382584,0.0386537,0.0390926,0.0394902,0.0399961,0.0404785,0.0410881,0.0412942])
ur3d=np.array([0.012901,0.0208041,0.0284685,0.0306106,0.0326634,0.0335915,0.0336772,0.0333658,0.0323613,0.0321997,0.0314408,0.0309372,0.0304445,0.0298216,0.0293007,0.0287184,0.0282031,0.0276231,0.027111,0.026509,0.026308])
ur1d=ur1d*180/np.pi+.0621789
ur2d=ur2d*180/np.pi+-.000881437
ur3d=ur3d*180/np.pi+-.012901
#lateral,bending,(5N),data,converted,to,degrees
ur1c5=np.array([-0.0621789,-0.0620264,-0.0545439,-0.0484793,-0.0465711,-0.0451011,-0.0465149,-0.0496444,-0.0558365,-0.0632569,-0.0709252,-0.0871621,-0.0987327,-0.102254,-0.114052,-0.127773,-0.134922,-0.145633,-0.152298,-0.160696,-0.166575])
ur2c5=np.array([0.000881437,0.00326221,-0.011875,-0.0302361,-0.0386495,-0.0577833,-0.0764783,-0.089543,-0.10782,-0.123392,-0.136592,-0.159568,-0.174095,-0.178343,-0.191596,-0.206084,-0.213517,-0.224827,-0.232073,-0.241509,-0.248373])
ur3c5=np.array([0.012901,0.0125327,-0.00147924,-0.0179866,-0.0254283,-0.0416417,-0.0563778,-0.0657436,-0.0784185,-0.0889071,-0.0977032,-0.112635,-0.121718,-0.124276,-0.131979,-0.139899,-0.143888,-0.150007,-0.153942,-0.158989,-0.162596])
ur1c5=ur1c5*180/np.pi+.0621789
ur2c5=ur2c5*180/np.pi+-.000881437
ur3c5=ur3c5*180/np.pi+-.012901
#lateral,bending,(5P),data,converted,to,degrees
ur1d5=np.array([-0.0621789,-0.0606846,-0.0488041,-0.0449876,-0.0413924,-0.0414924,-0.0436881,-0.0485408,-0.0566398,-0.0664794,-0.0759532,-0.09121,-0.100393,-0.116417,-0.127198,-0.140924,-0.150343,-0.15998,-0.168586,-0.175432,-0.180603])
ur2d5=np.array([0.000881437,0.0224589,0.0576795,0.0729082,0.0976503,0.118363,0.133134,0.149587,0.16725,0.184098,0.197915,0.217635,0.228363,0.245218,0.255188,0.266652,0.274673,0.283214,0.291338,0.29816,0.303512])
ur3d5=np.array([0.012901,0.0275127,0.0571845,0.0705319,0.0922882,0.110156,0.122589,0.136126,0.150481,0.163803,0.174181,0.188757,0.196063,0.207011,0.213519,0.220167,0.224659,0.229483,0.234075,0.237866,0.240779])
ur1d5=ur1d5*180/np.pi+.0621789
ur2d5=ur2d5*180/np.pi+-.000881437
ur3d5=ur3d5*180/np.pi+-.012901
#axial,rotation,(6N),data,converted,to,degrees
ur1c6=np.array([-0.0621789,-0.0621284,-0.053235,-0.0436875,-0.0223806,-0.0162299,-0.00627148,-0.000804951,0.00372868,0.00631583,0.00910946,0.0120567,0.015074,0.0177201,0.0199891,0.0222935,0.0244396,0.0269785,0.029174,0.0322197,0.0336978])
ur2c6=np.array([0.000881437,0.00446454,-0.00511759,-0.0156444,-0.0348113,-0.0407599,-0.0531264,-0.0611621,-0.0685565,-0.072927,-0.0780663,-0.084061,-0.090774,-0.0968582,-0.102308,-0.107896,-0.113013,-0.11875,-0.123346,-0.129043,-0.131598])
ur3c6=np.array([0.012901,0.00588713,-0.0137407,-0.0336508,-0.0697041,-0.0806592,-0.101971,-0.115795,-0.128555,-0.136188,-0.145201,-0.155559,-0.16699,-0.177425,-0.186766,-0.196413,-0.205398,-0.215732,-0.224202,-0.235016,-0.239966])
ur1c6=ur1c6*180/np.pi+.0621789
ur2c6=ur2c6*180/np.pi+-.000881437
ur3c6=ur3c6*180/np.pi+-.012901
#axial,rotation,(6P),data,converted,to,degrees
ur1d6=np.array([-0.0621789,-0.0622207,-0.0620444,-0.0607921,-0.058138,-0.0564144,-0.0520049,-0.0469182,-0.0412817,-0.0358627,-0.0288005,-0.0267244,-0.0206179,-0.0186735,-0.013997,-0.011405,-0.00659927,-0.00388954,0.000453262,0.00402002,0.00740695])
ur2d6=np.array([0.000881437,0.00393277,0.0105538,0.0176399,0.0271613,0.0317811,0.0413302,0.050861,0.0604996,0.0695805,0.0822573,0.0861957,0.098727,0.103003,0.113649,0.119368,0.129349,0.134795,0.143345,0.150287,0.156787])
ur3d6=np.array([0.012901,0.0167372,0.0282509,0.0407853,0.0578091,0.0661457,0.0834927,0.10124,0.119392,0.136616,0.160275,0.167437,0.189355,0.19653,0.213864,0.222955,0.238595,0.247088,0.260378,0.271166,0.281248])
ur1d6=ur1d6*180/np.pi+.0621789
ur2d6=ur2d6*180/np.pi+-.000881437
ur3d6=ur3d6*180/np.pi+-.012901
#4N & 4P
u1z= np.concatenate((np.flip(ur1c[2:21]),ur1d))
u2z= np.concatenate((np.flip(ur2c[2:21]),ur2d))
u3z=np.concatenate((np.flip(ur3c[2:21]),ur3d))
t3= np.concatenate((2*(-1*np.flip(tc[2:21])+2),(tc-2)*2))

#5N & 5P
u1z5=np.concatenate((np.flip(ur1c5[2:21]),ur1d5))
u2z5=np.concatenate((np.flip(ur2c5[2:21]),ur2d5))
u3z5=np.concatenate((np.flip(ur3c5[2:21]),ur3d5))

#6N & 6P
u1c6=np.concatenate((np.flip(ur1c6[2:21]),ur1d6))
u2c6=np.concatenate((np.flip(ur2c6[2:21]),ur2d6))
u3c6=np.concatenate((np.flip(ur3c6[2:21]),ur3d6))

plots = np.linspace(1,3,3)
print(plots)

fig, axs = plt.subplots(3, 1, figsize=(10, 13), sharex=True)

# --- Plot 1: u1z, u2z, u3z ---
axs[0].plot(t3, u1z, label='ROM X-axis')
axs[0].plot(t3, u2z, label='ROM Y-axis')
axs[0].plot(t3, u3z, label='ROM Z-axis')
axs[0].set_title('FixedNoTether: Flexion/Extension')
axs[0].set_ylabel('ROM (deg)')
axs[0].grid(True)
axs[0].legend()

# --- Plot 2: u1z5, u2z5, u3z5 ---
axs[1].plot(t3, u1z5, label='ROM X-axis')
axs[1].plot(t3, u2z5, label='ROM Y-axis')
axs[1].plot(t3, u3z5, label='ROM Z-axis')
axs[1].set_title('Lateral Bending')
axs[1].set_ylabel('ROM (deg)')
axs[1].grid(True)
axs[1].legend()

# --- Plot 3: u1z6, u2z6, u3z6 ---
axs[2].plot(t3, u1c6, label='ROM X-axis')
axs[2].plot(t3, u2c6, label='ROM Y-axis')
axs[2].plot(t3, u3c6, label='ROM Z-axis')
axs[2].set_title('Axial Rotation')
axs[2].set_xlabel('Time')
axs[2].set_ylabel('ROM (deg)')
axs[2].grid(True)
axs[2].legend()

fig.savefig(f"New_ROM/Plots/FixedNoTetherROM.png", dpi = 300)
plt.tight_layout()
plt.show()